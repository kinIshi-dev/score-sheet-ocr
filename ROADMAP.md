# Score Sheet OCR - プロジェクトロードマップ

**最終更新**: 2025-12-21
**ステータス**: Phase 1 - MVP開発中

---

## ビジョン

JPA（Japan Poolplayers Association）ビリヤードスコアシートをデジタル化する信頼性の高いOCRシステムを構築し、手作業でのデータ入力を削減し、大会データの精度を向上させる。

---

## Phase 1: MVP（実用最小限の製品）

**期間**: 2-4週間
**目標**: CLIインターフェースを備えた基本的なOCRシステム

### 目的
- [x] プロジェクトのセットアップと構造
- [ ] 画像前処理パイプライン
- [ ] Tesseract OCR統合
- [ ] 基本的なテキスト抽出
- [ ] 単一画像処理用CLIインターフェース
- [ ] CSV/JSONエクスポート機能
- [ ] 基本的なエラーハンドリング
- [ ] コア機能のユニットテスト
- [ ] セットアップと使用方法のドキュメント

### 成功基準
- 鮮明なスコアシート画像からテキストを抽出できる
- CSV/JSON形式でデータを出力できる
- 単一画像を処理できるコマンドラインツール
- スキャン品質の良い画像で70%以上の精度

---

## Phase 2: 機能強化と信頼性向上

**期間**: 4-6週間
**目標**: 精度向上とバッチ処理の追加

### 目的
- [ ] 高度な画像前処理
  - [ ] 傾き補正/回転補正
  - [ ] パースペクティブ変換
  - [ ] 適応的二値化
  - [ ] ノイズ除去の強化
- [ ] テンプレートベースのフィールド検出
  - [ ] スコアシートテンプレートの定義
  - [ ] 関心領域（ROI）抽出の実装
  - [ ] フィールド別OCR最適化
- [ ] データ検証
  - [ ] ビリヤードのスコアリングルールに対する検証
  - [ ] 完全性チェック
  - [ ] 疑わしい/低信頼度の結果をフラグ
- [ ] バッチ処理
  - [ ] 一度に複数画像を処理
  - [ ] 進捗レポート
  - [ ] エラー集約とレポート
- [ ] 信頼度スコアリング
  - [ ] OCR信頼度メトリクス
  - [ ] 手動レビュー項目のフラグ
- [ ] 包括的テスト
  - [ ] 統合テスト
  - [ ] サンプルデータでの精度ベンチマーク
- [ ] ロギングとエラーハンドリング
  - [ ] 構造化ロギング
  - [ ] 適切なエラー回復

### 成功基準
- スキャン品質の良い画像で85%以上の精度
- 低品質画像で60%以上の精度
- バッチモードで50枚以上の画像を処理
- 低信頼度結果を自動的にフラグ

---

## Phase 3: プロダクション対応

**期間**: 6-8週間
**目標**: Webインターフェースを備えたプロダクショングレードシステム

### 目的
- [ ] Webインターフェース
  - [ ] アップロードインターフェース
  - [ ] リアルタイム処理フィードバック
  - [ ] 結果の可視化
  - [ ] 手動修正インターフェース
- [ ] データベース統合
  - [ ] 処理結果の保存
  - [ ] 処理履歴の追跡
  - [ ] 検索とフィルタ機能
- [ ] 複数OCRエンジンのサポート
  - [ ] 代替案の評価（Google Vision、Azureなど）
  - [ ] アンサンブル/投票メカニズム
- [ ] API開発
  - [ ] 統合用RESTful API
  - [ ] 認証と認可
  - [ ] レート制限
- [ ] 高度な機能
  - [ ] 過去データとの比較
  - [ ] 統計レポート
  - [ ] 複数形式へのエクスポート（Excel、PDF）
- [ ] パフォーマンス最適化
  - [ ] 並列処理
  - [ ] キャッシング戦略
  - [ ] リソース最適化
- [ ] セキュリティ強化
  - [ ] 入力検証
  - [ ] ファイルアップロード制限
  - [ ] データプライバシーコンプライアンス

### 成功基準
- Webインターフェースがデプロイされアクセス可能
- スキャン品質の良い画像で90%以上の精度
- 1時間あたり100枚以上の画像を処理
- 外部統合用APIが利用可能
- 包括的なドキュメント

---

## Phase 4: 機械学習と自動化

**期間**: 8-12週間（将来）
**目標**: ML駆動の改善と完全自動化

### 目的
- [ ] 機械学習統合
  - [ ] フィールド検出用カスタムモデルのトレーニング
  - [ ] 手書き文字認識の改善
  - [ ] 修正からの自動学習
- [ ] スマート前処理
  - [ ] MLベースの画像強化
  - [ ] 自動テンプレート検出
- [ ] ワークフロー自動化
  - [ ] メール/クラウドストレージ統合
  - [ ] 自動通知
  - [ ] スケジュールされたバッチ処理
- [ ] アナリティクスダッシュボード
  - [ ] 処理統計
  - [ ] 品質メトリクス追跡
  - [ ] 大会データインサイト
- [ ] モバイルアプリ（オプション）
  - [ ] カメラキャプチャとアップロード
  - [ ] デバイス上プレビュー
  - [ ] クラウド同期

### 成功基準
- すべての画像品質で95%以上の精度
- 自動テンプレート検出
- 標準ケースでゼロタッチ処理
- モバイルアプリ利用可能（追求する場合）

---

## マイルストーン

| マイルストーン | 目標日 | ステータス |
|-----------|-------------|--------|
| プロジェクトセットアップ完了 | 2025-12-21 | ✅ 完了 |
| MVP - 最初の動作プロトタイプ | 未定 | 🟡 進行中 |
| MVP - 機能完成 | 未定 | ⚪ 未着手 |
| Phase 2 - 機能強化完了 | 未定 | ⚪ 未着手 |
| Phase 3 - プロダクションデプロイ | 未定 | ⚪ 未着手 |
| Phase 4 - ML統合 | 未定 | ⚪ 未着手 |

---

## 技術的負債と既知の問題

*（開発が進むにつれて更新）*

- 現時点でなし

---

## 調査と意思決定が必要な事項

1. **スコアシートフォーマットのドキュメント化**
   - JPAスコアシートのサンプルが必要
   - フィールドの位置とフォーマットをドキュメント化
   - トーナメントタイプ間のバリエーションを特定

2. **OCRエンジンの評価**
   - Tesseract言語設定の最適化
   - 比較のための商用OCR APIの検討

3. **テンプレート戦略**
   - 固定テンプレート vs. 柔軟な検出
   - 複数テンプレートのサポートが必要か？

4. **デプロイターゲット**
   - 最終システムはどこで動作させるか？
   - クラウド vs. オンプレミス要件

---

## 備考

- このロードマップは生きたドキュメントであり、プロジェクトの進化に伴い更新される
- 優先順位はユーザーフィードバックと発見された要件に基づいて変更される可能性がある
- 各フェーズは前のフェーズの上に構築される
- タイムライン見積もりは概算であり変更される可能性がある
