# 現在のスプリント - TODO

**スプリント**: MVP開発 - スプリント1
**開始日**: 2025-12-21
**フォーカス**: コアOCR機能と基本的な前処理

---

## 優先度: 高 🔴

### 1. サンプルデータの収集
- [ ] JPAスコアシート（スキャン画像）のサンプルを入手
- [ ] サンプルスコアシートで `data/raw/example.jpg` を作成
- [ ] `docs/scoresheet_format.md` にスコアシートのレイアウトをドキュメント化
- [ ] 抽出する主要フィールドを特定（選手名、スコア、日付など）

**ステータス**: 未着手
**ブロッカー**: JPA大会のサンプルスコアシートが必要

---

### 2. 画像前処理モジュール
- [ ] `src/preprocessing/image_processor.py` を作成
- [ ] グレースケール変換を実装
- [ ] 基本的な二値化を実装（通常、適応的）
- [ ] ノイズ除去を実装（メディアンブラー、モルフォロジー演算）
- [ ] 画像リサイズ/スケーリングを実装
- [ ] 前処理パイプライン関数を追加
- [ ] `tests/unit/test_preprocessing.py` にユニットテストを作成

**ステータス**: 未着手
**担当**: Claude + ユーザー
**見積もり時間**: 2-3時間

---

### 3. Tesseract OCR統合
- [ ] `src/ocr/tesseract_ocr.py` を作成
- [ ] 基本的なOCR関数を実装（画像 → テキスト）
- [ ] 日本語 + 英語用にTesseractを設定
- [ ] 異なるPSM（ページセグメンテーションモード）をテスト
- [ ] 信頼度スコア抽出を追加
- [ ] `tests/unit/test_ocr.py` にユニットテストを作成

**ステータス**: 未着手
**担当**: Claude + ユーザー
**見積もり時間**: 2-3時間
**依存関係**: サンプルデータ（タスク#1）

---

## 優先度: 中 🟡

### 4. 基本的なCLIインターフェース
- [ ] `src/cli.py` または `main.py` を作成
- [ ] 引数解析を実装（入力ファイル、出力ファイル）
- [ ] 基本的なエラーハンドリングを追加
- [ ] 単一画像処理フローを実装:
  - 画像読み込み → 前処理 → OCR → 出力
- [ ] 詳細/デバッグ出力オプションを追加
- [ ] サンプル画像でテスト

**ステータス**: 未着手
**担当**: Claude + ユーザー
**見積もり時間**: 1-2時間
**依存関係**: タスク#2と#3

---

### 5. データエクスポート機能
- [ ] `src/export/data_exporter.py` を作成
- [ ] JSONエクスポートを実装
- [ ] CSVエクスポートを実装
- [ ] 出力ファイルにタイムスタンプを追加
- [ ] 出力ディレクトリの作成を処理
- [ ] `tests/unit/test_export.py` にユニットテストを作成

**ステータス**: 未着手
**担当**: Claude + ユーザー
**見積もり時間**: 1-2時間

---

### 6. 基本的なテストセットアップ
- [ ] pytest設定を構成（`pytest.ini` または `pyproject.toml`）
- [ ] サンプル画像用のテストフィクスチャを作成
- [ ] `tests/integration/test_full_pipeline.py` に統合テストを作成
- [ ] すべてのテストが通ることを確認
- [ ] テストカバレッジレポートを追加

**ステータス**: 未着手
**担当**: Claude + ユーザー
**見積もり時間**: 1-2時間
**依存関係**: タスク#2、#3、#5

---

## 優先度: 低 🟢

### 7. ドキュメント
- [ ] `docs/scoresheet_format.md` を作成（フィールドの説明）
- [ ] `docs/development.md` を作成（コントリビューター向けセットアップ手順）
- [ ] README.mdに使用例を追加
- [ ] 前処理オプションをドキュメント化
- [ ] OCR設定オプションをドキュメント化

**ステータス**: 未着手
**担当**: ユーザー + Claude
**見積もり時間**: 1-2時間

---

### 8. 環境セットアップの検証
- [ ] クリーンな環境でインストールをテスト
- [ ] Tesseractのインストール手順を検証
- [ ] READMEにトラブルシューティングセクションを追加
- [ ] 開発依存関係用に `requirements-dev.txt` を作成

**ステータス**: 未着手
**担当**: ユーザー
**見積もり時間**: 1時間

---

## 完了 ✅

- [x] プロジェクト構造のセットアップ
- [x] `.gitignore` の作成
- [x] `requirements.txt` の作成
- [x] インストール手順付きで `README.md` を更新
- [x] プロジェクトコンテキストで `claude.md` を作成
- [x] 初期gitコミットとプッシュ
- [x] `ROADMAP.md` の作成
- [x] `TODO.md` の作成（このファイル）

---

## ブロッカーと質問 ⚠️

1. **サンプルスコアシート**: 開発に使用する実際のJPAスコアシート画像が必要
   - アクション: ユーザーが提供するか、モック例を作成

2. **フィールド定義**: 抽出するフィールドを正確に把握する必要がある
   - アクション: サンプルが利用可能になったら `docs/scoresheet_format.md` にドキュメント化

3. **日本語テキストの処理**: Tesseract日本語言語パックの要件を確認
   - アクション: 日本語テキストサンプルでテスト

---

## 備考

- タスクは小さく集中的に保つ（各1-3時間）
- タスクが完了したら毎日このファイルを更新
- 完了したタスクを「完了」セクションに移動
- 新しいタスクが出現したら追加
- GitHub issueを作成した場合はリンク

---

## 次のスプリント計画

**スプリント2の暫定項目**:
- テンプレートベースのフィールド検出
- バッチ処理サポート
- 高度な前処理（傾き補正、パースペクティブ補正）
- データ検証ロジック
- 改善されたエラーハンドリングとロギング

---

**最終更新**: 2025-12-21
